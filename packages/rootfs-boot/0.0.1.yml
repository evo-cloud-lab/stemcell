---
package:
    name: rootfs-boot
    description: Scripts for boot up
    version: 0.0.1

sources:
    - file: scripts/startup.sh
      packaged: true

    - file: init/startup.conf
      packaged: true
      
    - file: init/klogd.conf
      packaged: true

    - file: init/syslogd.conf
      packaged: true

    - file: init/network-init.conf
      packaged: true
    
    - file: init/net-if-init.conf
      packaged: true
    
    - file: init/net-if-changed.conf
      packaged: true
    
    - file: scripts/net-if-changed.sh
      packaged: true

    - file: init/net-port.conf
      packaged: true

    - file: init/console.conf
      packaged: true

    - file: init/tty1.conf
      packaged: true
    
    - file: init/tty2.conf
      packaged: true
    
    - file: init/tty3.conf
      packaged: true

    - file: init/tty4.conf
      packaged: true

    - file: scripts/terminal.sh
      packaged: true

    - file: scripts/udhcpc-init.sh
      packaged: true

    - file: scripts/udhcpc-script.sh
      packaged: true

    - file: scripts/zcip-script.sh
      packaged: true

    - file: passwd.txt
      packaged: true
    
    - file: group.txt
      packaged: true
      
    - file: banner.txt
      packaged: true
    
    - file: issue.txt
      packaged: true
      
    - file: profile.txt
      packaged: true

    - file: bash.bashrc
      packaged: true

    - file: init/cloud.conf
      packaged: true
    
    - file: init/cloud-svc.conf
      packaged: true
      
    - file: cloud.env
      packaged: true
      
    - file: cloud.d/common.conf
      packaged: true
    
    - file: cloud.d/logger.conf
      packaged: true
    
    - file: bashrc.d/cloud.bashrc
      packaged: true

build:
    - commands:
        # make sure /etc exists
        - mkdir -p $_RELDIR/root/etc
        # create init script and services
        - cp -rf $_PKGDIR/init $_RELDIR/root/etc/
        - cp -rf $_PKGDIR/scripts $_RELDIR/root/etc/
        - chmod a+rx $_RELDIR/root/etc/scripts/*.sh
        # cloud configurations
        - cp $_PKGDIR/cloud.env $_RELDIR/root/etc/
        - cp -rf $_PKGDIR/cloud.d $_RELDIR/root/etc/
        # other files
        - cp $_PKGDIR/banner.txt $_RELDIR/root/etc/banner
        - cp $_PKGDIR/issue.txt $_RELDIR/root/etc/issue
        - cp $_PKGDIR/passwd.txt $_RELDIR/root/etc/passwd
        - cp $_PKGDIR/group.txt $_RELDIR/root/etc/group
        - cp $_PKGDIR/profile.txt $_RELDIR/root/etc/profile
        - cp $_PKGDIR/bash.bashrc $_RELDIR/root/etc/
        - cp -rf $_PKGDIR/bashrc.d $_RELDIR/root/etc/
        # for upstart logs
        - mkdir -p $_RELDIR/root/var/log/upstart