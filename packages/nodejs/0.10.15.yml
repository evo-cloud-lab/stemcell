---
package:
    name: nodejs
    description: Node.js Runtime
    version: 0.10.15
    dependencies:
        - tc-linux
        - openssl
        - zlib

sources:
    - file: node-v0.10.15.tar.gz
      digest: sha1:14174896de074c244b0ed2251a95d7163d5a5e87
      origins:
        - http://nodejs.org/dist/v0.10.15/node-v0.10.15.tar.gz

build:
    - commands:
        - tar zxf $_SRCDIR/node-v0.10.15.tar.gz
    
    - workdir: node-v0.10.15
      env:
        CC: x86_64-linux-gcc
      paths:
        - dep: tc-linux
          dir: bin
      commands:
        - >
            ./configure --prefix=/usr --dest-cpu=x64 --dest-os=linux
            --shared-zlib
            --shared-zlib-includes=$_RELBASE/$_DEP_ZLIB/usr/include
            --shared-zlib-libpath=$_RELBASE/$_DEP_ZLIB/usr/lib
            --shared-openssl
            --shared-openssl-includes=$_RELBASE/$_DEP_OPENSSL/usr/include
            --shared-openssl-libpath=$_RELBASE/$_DEP_OPENSSL/usr/lib
        - make
        - make install DESTDIR=$_RELDIR
