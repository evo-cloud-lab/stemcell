---
package:
    name: kernel
    description: Linux kernel
    version: 3.10.0

sources:
    - file: linux-3.10.tar.xz
      digest: sha1:a649d5c15f68ccbae1c4863e357bdc48da4cc0b4
      origins:
        - https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.10.tar.xz
    
    - file: config-3.10.0
      packaged: true

build:
    - commands:
        - tar Jxf $_SRCDIR/linux-3.10.tar.xz
        - mkdir -p linux
        - make -C linux-3.10 defconfig O=$_BLDDIR/linux
    
    - workdir: linux
      commands:
        - cp -f $_PKGDIR/config-3.10.0 .config
        - make olddefconfig
        - make headers_install INSTALL_HDR_PATH=$_RELDIR
        - make bzImage V=1
        - cp -f arch/x86/boot/compressed/vmlinux $_RELDIR/
        - cp -f arch/x86/boot/compressed/vmlinux.bin $_RELDIR/
        - cp -f arch/x86/boot/bzImage $_RELDIR/
        - make modules V=1
        - make modules_install INSTALL_MOD_PATH=$_RELDIR
        - make firmware_install INSTALL_MOD_PATH=$_RELDIR
        