---
package:
    name: glibc
    description: GNU Libc
    version: 2.12.2
    dependencies:
        - kernel-headers

sources:
    - file: glibc-2.12.2.tar.xz
      digest: sha1:1602bb3647e71747595a72fde059fce0a5ba04ec
      origins:
        - http://ftpmirror.gnu.org/glibc/glibc-2.12.2.tar.xz

build:
    - commands:
        - tar Jxf $_SRCDIR/glibc-2.12.2.tar.xz
        - mkdir -p glibc
    
    - workdir: glibc
      commands:
        - CFLAGS="-O2 -U_FORTIFY_SOURCE -fno-stack-protector" ../glibc-2.12.2/configure --prefix=/usr --with-headers=$_RELBASE/$_DEP_KERNEL_HEADERS/include --enable-add-ons --enable-kernel=2.6.0 --disable-profile --host=x86_64-linux
        - make -j4
        - make install install_root=$_RELDIR
        - cp -r $_RELBASE/$_DEP_KERNEL_HEADERS/include/* $_RELDIR/usr/include/